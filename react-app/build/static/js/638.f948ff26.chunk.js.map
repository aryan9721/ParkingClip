{"version":3,"file":"static/js/638.f948ff26.chunk.js","mappings":"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","sources":["pages/QrRecord/QrRecord.js","pages/api/index.js"],"sourcesContent":["import \"./QrRecord.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { MDBDataTable } from \"mdbreact\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport api  from  '../api';\r\n// import HttpService from '../../utils/httpService'\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  // Avatar,\r\n  // AvatarGroup,\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  // List,\r\n  // ListItemAvatar,\r\n  // ListItemButton,\r\n  // ListItemSecondaryAction,\r\n  // ListItemText,\r\n  // MenuItem,\r\n  Stack,\r\n  // TextField,\r\n  Typography\r\n} from '@mui/material';\r\n\r\nconst QrRecord = () => {\r\n\r\n const [locations, setlocations] = useState([]);\r\n    const [location, setlocation] = useState('no location found');\r\n    const [businesss, setbusinesss] = useState([]);\r\n    const [business, setbusiness] = useState('no business found');\r\nconst handlelocation = (event) => {\r\n      const location = JSON.parse(event.target.value);\r\n      // console.log('lox',location);\r\n      setlocation(location);\r\n      // setlocationData(location);\r\n    };\r\n  \r\n    // useEffect(() => {\r\n    //   getlocations();\r\n    // }, [business]);\r\n  \r\n    // const getlocations = () => {\r\n    //   axios.get(api + 'api/businesses/' + business.businessId).then((response) => {\r\n    //     setlocations(response.data.data.locations);\r\n    //     setlocation(response.data.data.locations[0].name);\r\n    //   });\r\n    // };\r\n\r\n\r\n    const handlebusiness = (event) => {\r\n      const business = JSON.parse(event.target.value);\r\n      // console.log(business);\r\n      setbusiness(business);\r\n      console.log(business);\r\n      setlocations(business.locations);\r\n      if(business.location[0])\r\n      setlocation(business.locations[0]);\r\n      else\r\n      setlocation(\"no location found\");\r\n    };\r\n  \r\n    useEffect(() => {\r\n      getbusinesss();\r\n    }, []);\r\n  \r\n    const getbusinesss = () => {\r\n      axios.get(api + 'api/businesses').then((response) => {\r\n        console.log(response.data.data.data);\r\n        setbusinesss(response.data.data.data);\r\n        setbusiness(response.data.data.data[0]);\r\n        setlocations(response.data.data.data[0].locations);\r\n        setlocation(response.data.data.data[0].locations[0]);\r\n      });\r\n    };\r\n  const baseURL = api + \"api/commons/vehicles/\"+business.businessId+\"?location=\"+location.name;\r\n\r\n  const [results, setresults] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getresults();\r\n  }, [location]);\r\n  \r\n  //get todo list from database\r\n  const getresults = () => {\r\n    axios.get( api + \"api/commons/vehicles/\"+business.businessId+\"?location=\"+location.name).then((response) => {\r\n      console.log(response);\r\n      setresults(response.data.data.data);\r\n    });\r\n  };\r\n\r\n  const data = {\r\n      columns: [\r\n        {\r\n          label: 'QR Code',\r\n          field: 'qrCode'\r\n        },\r\n        {\r\n          label: \"Mobile No\",\r\n          field: \"mobileNo\",\r\n        },\r\n        {\r\n          label: \"Vehicle Number\",\r\n          field: \"vehicleRegistrationNo\",\r\n          width: 150,\r\n        },\r\n        {\r\n          label: \"Vehicle Type\",\r\n          field: \"vehicleType\",\r\n          width: 270,\r\n        },\r\n        {\r\n          label: \"Print\",\r\n          field: \"actions\",\r\n          width: 50,\r\n          sort: false,\r\n        },\r\n      ],\r\n    rows: results && results.map((row) => ({ // Add a check before calling map\r\n      qrCode: <img src={row.qrCode} alt=\"\"></img>,\r\n      mobileNo: row.mobileNo,\r\n      vehicleRegistrationNo: row.vehicleRegistrationNo,\r\n      vehicleType: row.vehicleType,\r\n      actions: <button onClick={() => printing(row)}>Print</button> // Add a button to each row\r\n    })),\r\n  \r\n  };\r\n  function printing(row) {\r\n    console.log('printing',row);\r\n    const printWindow = window.open();\r\n    const img = new Image();\r\n    img.onload = function() {\r\n      printWindow.document.write(`<img src=\"${row.qrCode}\" />`);\r\n      printWindow.print();\r\n      printWindow.close();\r\n    };\r\n    img.src = row.qrCode;\r\n  }\r\n  // console.log(data);\r\n  return (\r\n    <div className=\"home\">\r\n      <div className=\"homeContainer\">\r\n        <div className=\"VRbody\">\r\n\r\n        <div className=\"formInput\" style={{ display: \"flex\", alignItems: \"center\" }}>\r\n  <Typography variant=\"h5\">QR Record for Business: </Typography>\r\n  <select style={{marginLeft: 10, marginRight: 10}} id=\"businessselect\" onChange={handlebusiness}>\r\n    {/* <option value=\"\">{locations[0].name}</option> */}\r\n    {businesss.map((bus) => (\r\n      <option value={JSON.stringify(bus)}>{bus.businessName}</option>\r\n    ))}\r\n  </select>\r\n  <Typography variant=\"h5\"> At Location: </Typography>\r\n  <select style={{marginLeft: 10}} id=\"locationSelect\" onChange={handlelocation}>\r\n    {/* <option value=\"\">{locations[0].name}</option> */}\r\n    {locations.map((location) => (\r\n      <option value={JSON.stringify(location)}>{location.name}</option>\r\n    ))}\r\n  </select>\r\n</div>\r\n\r\n\r\n          <h3>Registered Vehicles</h3>\r\n          <MDBDataTable\r\n            noBottomColumns\r\n            style={{ lineHeight: \"normal\", whiteSpace: \"pre\", justifyContent: \"center\" }}\r\n            striped\r\n            bordered\r\n            small\r\n            data={data}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default QrRecord;\r\n","// const baseURL = 'https://parking-management-service-804561330.development.catalystserverless.com/server/parking-management-service/';\r\n// const baseURL = 'http://localhost:5001/';\r\nconst baseURL = '/server/parking-management-service/';\r\n// const baseURL = 'http://parking-clip.com/server/parking-management-service/';\r\n// const baseURL = 'http://192.168.0.103:5001/';\r\n// const baseURL = 'http://localhost:3000/server/parking-management-service/';\r\nexport default baseURL;"],"names":["_useState","useState","_useState2","_slicedToArray","locations","setlocations","_useState3","_useState4","location","setlocation","_useState5","_useState6","businesss","setbusinesss","_useState7","_useState8","business","setbusiness","useEffect","getbusinesss","axios","api","then","response","console","log","data","_useState9","businessId","name","_useState10","results","setresults","getresults","columns","label","field","width","sort","rows","map","row","qrCode","_jsx","src","alt","mobileNo","vehicleRegistrationNo","vehicleType","actions","onClick","printWindow","window","open","img","Image","onload","document","write","concat","print","close","printing","children","className","_jsxs","style","display","alignItems","Typography","variant","marginLeft","marginRight","id","onChange","event","JSON","parse","target","value","bus","stringify","businessName","MDBDataTable","noBottomColumns","lineHeight","whiteSpace","justifyContent","striped","bordered","small"],"sourceRoot":""}