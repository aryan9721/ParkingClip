"use strict";(self.webpackChunkParkingClip=self.webpackChunkParkingClip||[]).push([[452],{22667:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n(29439),a=n(72791),s=n(61399),l=(n(66772),n(82957),n(71323),n(77063),n(1921)),r=n(2982),o=n(31243),c=n(80184),d=function(){var e=JSON.parse(localStorage.getItem("userdata")),t=(0,a.useState)([]),n=(0,i.Z)(t,2),d=n[0],h=n[1],p=(0,a.useState)("no location found"),u=(0,i.Z)(p,2),m=u[0],f=u[1],g=(0,a.useState)(0),x=(0,i.Z)(g,2);x[0],x[1];(0,a.useEffect)((function(){y()}),[]);var y=function(){o.Z.get(r.Z+"api/businesses/"+e.userId).then((function(e){h(e.data.data.locations),f(e.data.data.locations[0].name)}))},j=r.Z+"api/parkings/vehicle/tickets?limit=10000&location="+m,k=(0,a.useState)([]),v=(0,i.Z)(k,2),C=v[0],b=v[1];(0,a.useEffect)((function(){D()}),[m]);var D=function(){o.Z.get(j).then((function(e){console.log(e),b(e.data.data.data)}))},T=(0,a.useState)(!1),w=(0,i.Z)(T,2),S=w[0],N=w[1],Z=(0,a.useState)(null),R=(0,i.Z)(Z,2),E=R[0],I=R[1],P=(0,a.useState)(""),B=(0,i.Z)(P,2),L=(B[0],B[1]);var H={columns:[{label:"Ticket ID",field:"ticketId",width:150},{label:"Vehicle Type",field:"vehicleType",width:150},{label:"Vehicle Number",field:"vehicleRegistrationNo",width:270},{label:"Contact Number",field:"mobileNo",width:200},{label:"Check-in date",field:"entryDate",width:100},{label:"Check-in time",field:"entryTime",width:100},{label:"Exit date",field:"exitDate",width:100},{label:"Exit time",field:"exitTime",width:100},{label:"Location",field:"parkingLocation",width:100},{label:"Total Rent",field:"rent",sort:"asc"},{label:"Status",field:"parkingStatus"},{label:"Action",field:"actions",width:50,sort:!1}],rows:C&&C.map((function(e){return{qrCode:e.qrCode,ticketId:e.ticketId,vehicleType:e.vehicleType,vehicleRegistrationNo:e.vehicleRegistrationNo,mobileNo:e.mobileNo,entryDate:new Date(e.entryDateTime).toLocaleDateString(),entryTime:new Date(e.entryDateTime).toLocaleTimeString(),exitDate:e.exitDateTime?new Date(e.exitDateTime).toLocaleDateString():"NA",exitTime:e.exitDateTime?new Date(e.exitDateTime).toLocaleTimeString():"NA",parkingLocation:e.parkingLocation,parkingStatus:e.parkingStatus,rent:"EXITED"==e.parkingStatus?e.ticketPaymentDetails.parkingCharges.totalRent:e.ticketPaymentDetails.parkingCharges.totalRent+" (due)",actions:(0,c.jsx)("button",{onClick:function(){return function(e){I(e),N(!0)}(e)},children:"Show Ticket"})}}))};return(0,c.jsxs)("div",{children:[E?(0,c.jsx)(l.Z,{open:S,onClose:function(){return N(!1)},children:(0,c.jsxs)("div",{className:"ticket",children:[(0,c.jsx)("div",{className:"wrapper",children:(0,c.jsx)("span",{style:{fontSize:30,linHeight:39,marginBottom:30},children:"Ticket"})}),(0,c.jsxs)("div",{style:{marginBottom:18},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)("span",{style:{fontSize:20},children:E.businessName}),(0,c.jsx)("span",{children:"Ticket No. "})]}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)("div",{children:(0,c.jsx)("span",{children:E.parkingLocation})}),(0,c.jsx)("span",{style:{color:"#21BECC",fontWeight:"700"},children:E.ticketId})]})]}),(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,c.jsx)("div",{className:"center",style:{marginBottom:16},children:(0,c.jsx)("img",{src:E.qrCode,alt:"logo",width:200,height:200})})}),(0,c.jsxs)("div",{style:{marginBottom:16},children:[(0,c.jsx)("span",{className:"entryText",children:"Entry Details"}),(0,c.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,c.jsxs)("span",{children:[E.vehicleType," - ",E.vehicleRegistrationNo]})}),(0,c.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,c.jsxs)("span",{children:["Contact No - ",E.mobileNo]})})]}),(0,c.jsx)("span",{className:"entryText",style:{marginBottom:16},children:"Total Rent"}),(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,c.jsx)("div",{className:"borderContainer",style:{marginBottom:16},children:(0,c.jsxs)("span",{style:{fontSize:30},children:[" \u20b9  ",E.ticketPaymentDetails.parkingCharges.totalRent?E.ticketPaymentDetails.parkingCharges.totalRent:0]})})}),(0,c.jsx)("span",{children:"Rent breakup"}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"borderContainer",style:{height:135,marginTop:10,marginBottom:20,alignItems:"center",justifyContent:"center"},children:[(0,c.jsxs)("div",{className:"details",children:[(0,c.jsx)("span",{children:" Rent per Hour"}),(0,c.jsxs)("span",{children:[" ",E.ticketPaymentDetails.parkingCharges.perHrRent?E.ticketPaymentDetails.parkingCharges.perHrRent:0," "]})]}),(0,c.jsxs)("div",{className:"details",children:[(0,c.jsx)("span",{children:" Vallet Charges "}),(0,c.jsxs)("span",{children:[E.ticketPaymentDetails.parkingCharges.valletCharges?E.ticketPaymentDetails.parkingCharges.valletCharges:0," "]})]}),(0,c.jsxs)("div",{className:"details",style:{border:"none"},children:[(0,c.jsx)("span",{children:" Total Time Hr "}),(0,c.jsxs)("span",{children:[E.ticketPaymentDetails.parkingCharges.totalTimeHr?E.ticketPaymentDetails.parkingCharges.totalTimeHr:0," "]})]})]})}),"EXITED"!=E.parkingStatus?(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:10},children:(0,c.jsx)("button",{onClick:function(){var e=r.Z+"api/parkings/vehicle/ticketStatus/";o.Z.put(e+E.ticketId+"/EXITED").then((function(e){L(e)}))},children:"Exit Vehicle"})}):(0,c.jsxs)("span",{children:["Parking Status: ",E.parkingStatus]}),(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:16}})]})}):null,(0,c.jsxs)("div",{className:"formInput",style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("h4",{children:"Vehicle Record for "}),(0,c.jsx)("select",{id:"locationSelect",onChange:function(e){var t=e.target.value;f(t)},style:{marginLeft:"10px"},children:d.map((function(e){return(0,c.jsx)("option",{value:e.name,children:e.name})}))})]}),"      ",(0,c.jsx)(s.g0K,{noBottomColumns:!0,style:{lineHeight:"normal",whiteSpace:"pre",justifyContent:"center"},striped:!0,bordered:!0,small:!0,data:H}),(0,c.jsx)("button",{onClick:function(){var e=H.rows,t=Object.keys(e[0]).filter((function(e){return"qrCode"!==e&&"actions"!==e})),n="";n+=t.join(",")+"\n",e.forEach((function(e){var i=t.map((function(t){return e[t]}));n+=i.join(",")+"\n"})),console.log(n);var i=document.createElement("a");i.href="data:text/csv;charset=utf-8,"+encodeURI(n),i.download="table_data.csv",document.body.appendChild(i),i.click(),document.body.removeChild(i)},children:"Download Report"})]})}},2982:function(e,t){t.Z="/server/parking-management-service/"},19535:function(e,t){t.Z={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},20358:function(e,t,n){function i(e){var t=e.theme,n=e.name,i=e.props;if(!t||!t.props||!t.props[n])return i;var a,s=t.props[n];for(a in s)void 0===i[a]&&(i[a]=s[a]);return i}n.d(t,{Z:function(){return i}})},4576:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(72791);var a=i.createContext(null);function s(){return i.useContext(a)}}}]);
//# sourceMappingURL=452.9714424a.chunk.js.map