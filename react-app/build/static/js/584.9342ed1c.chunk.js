"use strict";(self.webpackChunkParkingClip=self.webpackChunkParkingClip||[]).push([[584],{39968:function(e,t,n){var a=n(1582),i=n(20890),r=n(61889),s=n(81918),c=n(81317),o=n(80184),l=function(e){var t=e.color,n=e.title,l=e.count,h=e.percentage;e.isLoss,e.extra;return(0,o.jsx)(c.Z,{contentSX:{p:2.25},children:(0,o.jsxs)(a.Z,{spacing:.5,children:[(0,o.jsx)(i.Z,{variant:"h6",color:"textSecondary",children:n}),(0,o.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,o.jsx)(r.ZP,{item:!0,children:(0,o.jsx)(i.Z,{variant:"h4",color:"inherit",children:l})}),h&&(0,o.jsx)(r.ZP,{item:!0,children:(0,o.jsx)(s.Z,{variant:"combined",color:t,label:"".concat(h,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};l.defaultProps={color:"primary"},t.Z=l},2982:function(e,t){t.Z="/server/parking-management-service/"},57584:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(37762),i=n(29439),r=n(72791),s=n(13496),c=n(61889),o=n(20890),l=n(1582),h=n(36151),d=n(64554),u=n(1413),p=n(13967),m=n(31243),x=n(2982),f=n(80184),Z={chart:{height:450,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},grid:{strokeDashArray:0}},g=function(e){var t=e.slot,n=(0,p.Z)(),a=n.palette.text,c=(a.primary,a.secondary),o=n.palette.divider,l=(0,r.useState)(Z),h=(0,i.Z)(l,2),d=h[0],g=h[1],v=(0,r.useState)([{name:"Tickets Generated",data:[0,86,28,115,48,210,136]}]),j=(0,i.Z)(v,2),y=j[0],k=j[1],b=(0,r.useState)(!0),S=(0,i.Z)(b,2),D=S[0],w=S[1],P=x.Z+"api/parkings/vehicle/tickets?limit=10000",E=(0,r.useState)([]),I=(0,i.Z)(E,2),T=I[0],C=I[1];(0,r.useEffect)((function(){M()}),[]);var M=function(){try{m.Z.get(P).then((function(e){C(e.data.data.data)}))}catch(e){}};return(0,r.useEffect)((function(){if(T){var e={},a=[],i=[],r={},s=[],l=new Date,h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];if("month"===t){for(var d=new Date,p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=0;m<12;m++){var x=new Date(d.getFullYear(),d.getMonth()-m,1),f=p[x.getMonth()];s.unshift(f),r[f]=0}T.forEach((function(e){var t=new Date(e.entryDateTime),n=p[t.getMonth()];void 0!==r[n]&&r[n]++})),s.forEach((function(e){i.push(r[e])}))}else{for(var Z=0;Z<7;Z++){var v=new Date(l.getFullYear(),l.getMonth(),l.getDate()-Z),j=h[v.getDay()];a.unshift(j),e[j]=0}T.forEach((function(t){var n=new Date(t.entryDateTime),a=h[n.getDay()];void 0!==e[a]&&e[a]++})),a.forEach((function(t){i.push(e[t])}))}k([{name:"month"===t?"Tickets Generated":"Tickets Generated (Last 7 days)",data:i}]),g((function(e){return(0,u.Z)((0,u.Z)({},e),{},{colors:[n.palette.primary.main,n.palette.primary[700]],xaxis:{categories:"month"===t?s:a,labels:{style:{colors:[c,c,c,c,c,c,c,c,c,c,c,c]}},axisBorder:{show:!0,color:o},tickAmount:"month"===t?11:7},yaxis:{labels:{style:{colors:[c]}}},grid:{borderColor:o},tooltip:{theme:"light"}})})),w(!1)}}),[t,T]),D?(0,f.jsx)("div",{children:"Loading..."}):(0,f.jsx)(s.Z,{options:d,series:y,type:"area",height:450})},v=n(81317),j=n(39968),y=n(57689),k=function(){var e=(0,y.s0)(),t=(0,r.useState)([]),n=(0,i.Z)(t,2),u=n[0],p=n[1],Z=JSON.parse(localStorage.getItem("userdata"));(0,r.useEffect)((function(){"ADMIN"===Z.role&&e("/AdminDashboard"),"BUSINESS_OWNER"===Z.role&&e("/BusinessDashboard")}),[Z.role]);var k=(0,r.useState)([]),b=(0,i.Z)(k,2),S=b[0],D=b[1];(0,r.useEffect)((function(){w()}),[]);var w=function(){try{console.log(x.Z+"api/businesses/"+Z.businessId),m.Z.get(x.Z+"api/businesses/"+Z.businessId).then((function(e){D(e.data.data.locations)}))}catch(e){console.log(e)}},P=S.find((function(e){return e.name===Z.location})),E=0;if(P)for(var I=0;I<P.vehicleDetails.length;I++)E+=parseInt(P.vehicleDetails[I].capacity);var T=x.Z+"api/parkings/vehicle/tickets?limit=10000";(0,r.useEffect)((function(){C()}),[]);var C=function(){try{m.Z.get(T).then((function(e){p(e.data.data.data)}))}catch(e){}},M=(0,r.useState)("week"),A=(0,i.Z)(M,2),N=A[0],B=A[1];localStorage.getItem("token")||e("/app");var F={},G=0;if(u){var J,L=(0,a.Z)(u);try{for(L.s();!(J=L.n()).done;){var O=J.value;"PARKED"===O.parkingStatus&&(G++,F[O.vehicleType]?F[O.vehicleType]++:F[O.vehicleType]=1)}}catch(z){L.e(z)}finally{L.f()}}return(0,f.jsxs)(c.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,f.jsx)(c.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,f.jsx)(o.Z,{variant:"h5",children:"Dashboard"})}),P&&F&&P.vehicleDetails.map((function(e,t){return(0,f.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,children:(0,f.jsx)(j.Z,{title:"".concat(e.type),count:"".concat(F[e.type]?F[e.type]:0,"  / ").concat(e.capacity)})},t)})),(0,f.jsx)("br",{}),(0,f.jsx)(c.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,f.jsxs)(c.ZP,{item:!0,xs:12,md:7,lg:8,children:[(0,f.jsxs)(c.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(c.ZP,{item:!0,children:(0,f.jsx)(o.Z,{variant:"h5",children:"Tickets Generated"})}),(0,f.jsx)(c.ZP,{item:!0,children:(0,f.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:0,children:[(0,f.jsx)(h.Z,{size:"small",onClick:function(){return B("month")},color:"month"===N?"primary":"secondary",variant:"month"===N?"outlined":"text",children:"Month"}),(0,f.jsx)(h.Z,{size:"small",onClick:function(){return B("week")},color:"week"===N?"primary":"secondary",variant:"week"===N?"outlined":"text",children:"Week"})]})})]}),(0,f.jsx)(v.Z,{content:!1,sx:{mt:1.5},children:(0,f.jsx)(d.Z,{sx:{pt:1,pr:2},children:(0,f.jsx)(g,{slot:N})})})]}),(0,f.jsxs)(c.ZP,{item:!0,xs:12,md:5,lg:4,children:[(0,f.jsxs)(c.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(c.ZP,{item:!0,children:(0,f.jsx)(o.Z,{variant:"h5",children:"Parking Slots Report"})}),(0,f.jsx)(c.ZP,{item:!0})]}),(0,f.jsxs)(v.Z,{sx:{mt:2},content:!1,children:[E&&(0,f.jsx)(d.Z,{sx:{p:3,pb:0},children:(0,f.jsxs)(l.Z,{spacing:2,children:[(0,f.jsx)(o.Z,{variant:"h6",color:"textSecondary",children:"Currently"}),(0,f.jsxs)(o.Z,{variant:"h3",children:[G,"/",E]})]})}),(0,f.jsx)("div",{id:"chart",style:{marginBottom:20},children:(0,f.jsx)(s.Z,{options:{labels:["Occupied","Vacant"],legend:{position:"bottom"}},series:[G,E-G],type:"pie",width:350})})]})]})]})}}}]);
//# sourceMappingURL=584.9342ed1c.chunk.js.map