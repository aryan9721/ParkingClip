"use strict";(self.webpackChunkParkingClip=self.webpackChunkParkingClip||[]).push([[168],{79168:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var n=i(29439),a=i(72791),s=i(61399),l=(i(66772),i(82957),i(71323),i(77063),i(90338)),r=i(1921),c=i(34051),o=i(94026),d=i(20269),h=i(2982),p=i(31243),m=i(80184),u=function(){var e=(0,a.useState)(""),t=(0,n.Z)(e,2),i=t[0],u=t[1],x=h.Z+"api/parkings/vehicle/tickets?limit=10000",g=(0,a.useState)([]),f=(0,n.Z)(g,2),k=f[0],y=f[1];(0,a.useEffect)((function(){T()}),[]);var j=(0,a.useState)(!1),C=(0,n.Z)(j,2),v=C[0],b=C[1];(0,a.useEffect)((function(){""!==i&&b(!0)}),[i]);var D=function(){b(!1),window.location.reload()},T=function(){p.Z.get(x).then((function(e){console.log(e),y(e.data.data.data)}))},w=(0,a.useState)(!1),N=(0,n.Z)(w,2),S=N[0],E=N[1],R=(0,a.useState)(null),Z=(0,n.Z)(R,2),P=Z[0],I=Z[1];var B={columns:[{label:"Ticket ID",field:"ticketId",width:150},{label:"Vehicle Type",field:"vehicleType",width:150},{label:"Vehicle Number",field:"vehicleRegistrationNo",width:270},{label:"Contact Number",field:"mobileNo",width:200},{label:"Check-in date",field:"entryDate",width:100},{label:"Check-in time",field:"entryTime",width:100},{label:"Exit date",field:"exitDate",width:100},{label:"Exit time",field:"exitTime",width:100},{label:"Location",field:"parkingLocation",width:100},{label:"Total Rent",field:"rent",sort:"asc"},{label:"Status",field:"parkingStatus"},{label:"Action",field:"actions",width:50,sort:!1},{label:"Force Exit",field:"forceExit"}],rows:k&&k.map((function(e){return{qrCode:e.qrCode,ticketId:e.ticketId,vehicleType:e.vehicleType,vehicleRegistrationNo:e.vehicleRegistrationNo,mobileNo:e.mobileNo,entryDate:new Date(e.entryDateTime).toLocaleDateString(),entryTime:new Date(e.entryDateTime).toLocaleTimeString(),exitDate:e.exitDateTime?new Date(e.exitDateTime).toLocaleDateString():"NA",exitTime:e.exitDateTime?new Date(e.exitDateTime).toLocaleTimeString():"NA",parkingLocation:e.parkingLocation,parkingStatus:e.parkingStatus,rent:"EXITED"==e.parkingStatus?e.ticketPaymentDetails.parkingCharges.totalRent:e.ticketPaymentDetails.parkingCharges.totalRent+" (due)",actions:(0,m.jsx)("button",{onClick:function(){return function(e){I(e),E(!0)}(e)},children:"Show Ticket"}),forceExit:"PARKED"==e.parkingStatus?(0,m.jsx)("button",{onClick:function(){return function(e){var t=h.Z+"api/parkings/vehicle/ticketStatus/";p.Z.put(t+e.ticketId+"/FORCE_EXIT").then((function(e){console.log("FORCE ",e),u(e.data.message)}))}(e)},children:"Force Exit"}):"NA"}}))};return(0,m.jsxs)("div",{children:[(0,m.jsxs)(c.Z,{open:v,onClose:D,children:[(0,m.jsx)(o.Z,{children:(0,m.jsx)("p",{children:i})}),(0,m.jsx)(d.Z,{children:(0,m.jsx)(l.Z,{onClick:D,color:"primary",children:"Close"})})]}),P?(0,m.jsx)(r.Z,{open:S,onClose:function(){return E(!1)},children:(0,m.jsxs)("div",{className:"ticket",children:[(0,m.jsx)("div",{className:"wrapper",children:(0,m.jsx)("span",{style:{fontSize:30,linHeight:39,marginBottom:30},children:"Ticket"})}),(0,m.jsxs)("div",{style:{marginBottom:18},children:[(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,m.jsx)("span",{style:{fontSize:20},children:P.businessName}),(0,m.jsx)("span",{children:"Ticket No. "})]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,m.jsx)("div",{children:(0,m.jsx)("span",{children:P.parkingLocation})}),(0,m.jsx)("span",{style:{color:"#21BECC",fontWeight:"700"},children:P.ticketId})]})]}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,m.jsx)("div",{className:"center",style:{marginBottom:16},children:(0,m.jsx)("img",{src:P.qrCode,alt:"logo",width:200,height:200})})}),(0,m.jsxs)("div",{style:{marginBottom:16},children:[(0,m.jsx)("span",{className:"entryText",children:"Entry Details"}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,m.jsxs)("span",{children:[P.vehicleType," - ",P.vehicleRegistrationNo]})}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,m.jsxs)("span",{children:["Contact No - ",P.mobileNo]})})]}),(0,m.jsx)("span",{className:"entryText",style:{marginBottom:16},children:"Total Rent"}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,m.jsx)("div",{className:"borderContainer",style:{marginBottom:16},children:(0,m.jsxs)("span",{style:{fontSize:30},children:[" \u20b9  ",P.ticketPaymentDetails.parkingCharges.totalRent?P.ticketPaymentDetails.parkingCharges.totalRent:0]})})}),(0,m.jsx)("span",{children:"Rent breakup"}),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"borderContainer",style:{height:135,marginTop:10,marginBottom:20,alignItems:"center",justifyContent:"center"},children:[(0,m.jsxs)("div",{className:"details",children:[(0,m.jsx)("span",{children:" Rent per Hour"}),(0,m.jsxs)("span",{children:[" ",P.ticketPaymentDetails.parkingCharges.perHrRent?P.ticketPaymentDetails.parkingCharges.perHrRent:0," "]})]}),(0,m.jsxs)("div",{className:"details",children:[(0,m.jsx)("span",{children:" Vallet Charges "}),(0,m.jsxs)("span",{children:[P.ticketPaymentDetails.parkingCharges.valletCharges?P.ticketPaymentDetails.parkingCharges.valletCharges:0," "]})]}),(0,m.jsxs)("div",{className:"details",style:{border:"none"},children:[(0,m.jsx)("span",{children:" Total Time Hr "}),(0,m.jsxs)("span",{children:[P.ticketPaymentDetails.parkingCharges.totalTimeHr?P.ticketPaymentDetails.parkingCharges.totalTimeHr:0," "]})]})]})}),"PARKED"==P.parkingStatus?(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:10},children:(0,m.jsx)("button",{onClick:function(){var e=h.Z+"api/parkings/vehicle/ticketStatus/";p.Z.put(e+P.ticketId+"/EXITED").then((function(e){E(!1),u(e.data.message)}))},children:"Exit Vehicle"})}):(0,m.jsxs)("span",{children:["Parking Status: ",P.parkingStatus]}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:16}})]})}):null,(0,m.jsx)("h3",{children:"Vehicle Record"}),(0,m.jsx)(s.g0K,{noBottomColumns:!0,style:{lineHeight:"normal",whiteSpace:"pre",justifyContent:"center"},striped:!0,bordered:!0,small:!0,data:B}),(0,m.jsx)("button",{onClick:function(){var e=B.rows,t=Object.keys(e[0]).filter((function(e){return"qrCode"!==e&&"actions"!==e})),i="";i+=t.join(",")+"\n",e.forEach((function(e){var n=t.map((function(t){return e[t]}));i+=n.join(",")+"\n"})),console.log(i);var n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+encodeURI(i),n.download="table_data.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n)},children:"Download Report"})]})}},2982:function(e,t){t.Z="/server/parking-management-service/"}}]);
//# sourceMappingURL=168.ff4391da.chunk.js.map