"use strict";(self.webpackChunkParkingClip=self.webpackChunkParkingClip||[]).push([[498],{67498:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var a=n(29439),i=n(72791),r=n(87462),l=n(38415),o=n(97257);var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.Z)(e,(0,r.Z)({defaultTheme:o.Z},t))},u=n(45987),c=n(28182);function d(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}var m=n(75936),f=n(91122);function p(e,t){return i.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}var v=i.createContext();var h=v,g=i.forwardRef((function(e,t){var n=e.children,a=e.classes,l=e.className,o=e.color,s=void 0===o?"primary":o,m=e.component,v=void 0===m?"div":m,g=e.disabled,x=void 0!==g&&g,b=e.error,C=void 0!==b&&b,j=e.fullWidth,D=void 0!==j&&j,S=e.focused,y=e.hiddenLabel,Z=void 0!==y&&y,T=e.margin,R=void 0===T?"none":T,E=e.required,w=void 0!==E&&E,H=e.size,k=e.variant,A=void 0===k?"standard":k,M=(0,u.Z)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),I=i.useState((function(){var e=!1;return n&&i.Children.forEach(n,(function(t){if(p(t,["Input","Select"])){var n=p(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),N=I[0],V=I[1],W=i.useState((function(){var e=!1;return n&&i.Children.forEach(n,(function(t){p(t,["Input","Select"])&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(d(e.value)&&""!==e.value||t&&d(e.defaultValue)&&""!==e.defaultValue)}(t.props,!0)&&(e=!0)})),e})),P=W[0],B=W[1],F=i.useState(!1),L=F[0],q=F[1],z=void 0!==S?S:L;x&&z&&q(!1);var O=i.useCallback((function(){B(!0)}),[]),U={adornedStart:N,setAdornedStart:V,color:s,disabled:x,error:C,filled:P,focused:z,fullWidth:D,hiddenLabel:Z,margin:("small"===H?"dense":void 0)||R,onBlur:function(){q(!1)},onEmpty:i.useCallback((function(){B(!1)}),[]),onFilled:O,onFocus:function(){q(!0)},registerEffect:undefined,required:w,variant:A};return i.createElement(h.Provider,{value:U},i.createElement(v,(0,r.Z)({className:(0,c.Z)(a.root,l,"none"!==R&&a["margin".concat((0,f.Z)(R))],D&&a.fullWidth),ref:t},M),n))})),x=(0,m.Z)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(g),b=n(2982),C=n(31243),j=n(80184),D=s((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},textField:{margin:e.spacing(1),width:200},button:{margin:e.spacing(1)}}}));var S=function(){var e=b.Z+"api/businesses/rates/",t=JSON.parse(localStorage.getItem("userdata")),n=(0,i.useState)([]),r=(0,a.Z)(n,2),l=r[0],o=r[1],s=(0,i.useState)(null),u=(0,a.Z)(s,2),c=u[0],d=u[1];(0,i.useEffect)((function(){m()}),[]);var m=function(){C.Z.get(e+t.businessId).then((function(e){o(e.data.data)}))},f=(0,i.useState)([]),p=(0,a.Z)(f,2),v=p[0],h=p[1];(0,i.useEffect)((function(){g()}),[]);var g=function(){C.Z.get(b.Z+"api/businesses/"+t.businessId).then((function(e){console.log(e.data.data.locations),h(e.data.data.locations),T(e.data.data.locations[0].name),H(e.data.data.locations[0].vehicleDetails[0].type)}))},S=(0,i.useState)("no location found"),y=(0,a.Z)(S,2),Z=y[0],T=y[1],R=(0,i.useState)(null),E=(0,a.Z)(R,2),w=E[0],H=E[1],k=D(),A=(0,i.useState)(new Date),M=(0,a.Z)(A,2),I=M[0],N=M[1],V=(0,i.useState)(new Date),W=(0,a.Z)(V,2),P=W[0],B=W[1],F=(0,i.useState)(["Car"]),L=(0,a.Z)(F,2),q=L[0],z=L[1];(0,i.useEffect)((function(){var e=v.find((function(e){return e.name===Z}));z(e?e.vehicleDetails.map((function(e){return e.type})):[])}),[Z]);return(0,j.jsxs)("div",{children:[(0,j.jsxs)(x,{className:k.formControl,children:[(0,j.jsxs)("div",{className:"formInput",children:[(0,j.jsx)("label",{children:"Select Location"}),(0,j.jsx)("select",{id:"locationSelect",onChange:function(e){var t=e.target.value;T(t),H(q[0])},children:v.map((function(e){return(0,j.jsx)("option",{value:e.name,children:e.name})}))})]}),Z&&(0,j.jsxs)("div",{className:"formInput",children:[(0,j.jsx)("label",{children:"Select a vehicle type:"}),(0,j.jsx)("select",{id:"vehicleTypeSelect",onChange:function(e){var t=e.target.value;H(t)},children:q.map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))})]})]}),(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:"Entry Date and Time: "}),(0,j.jsx)("br",{}),(0,j.jsx)("input",{type:"datetime-local",id:"datetimeInput",onChange:function(e){var t=new Date(e.target.value);t.setHours(t.getHours()-6),t.setMinutes(t.getMinutes()-30),N(t)}}),(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:"Entry Date and Time: "}),(0,j.jsx)("br",{}),(0,j.jsx)("input",{type:"datetime-local",id:"datetimeInput",onChange:function(e){var t=new Date(e.target.value);t.setHours(t.getHours()-6),t.setMinutes(t.getMinutes()-30),B(t)}}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),(0,j.jsx)("button",{onClick:function(){var e={isRentBasis:!0,entryDateTime:I,exitDateTime:P,isValletApplicable:!1},t=l.find((function(e){return e.vehicleType===w&&e.location===Z}));console.log("rate Structure",t),d(function(e,t){if(t.isRentBasis){var n=function(e,t){var n=new Date(e),a=new Date(t),i=Math.abs(a-n);return Math.ceil(i/36e5)}(t.entryDateTime,t.exitDateTime?t.exitDateTime:new Date),a=0,i=0,r=0,l=n;return!e.isDayEndMidnight&&n>24&&e.maxCapping&&(i=Math.floor(n/24)*e.maxDailyRent,l=n%24),r=(r=e.rentPerHr*l)<e.minimumCharges?e.minimumCharges:r,a=i+(r=e.maxCapping&&r>e.maxDailyRent?e.maxDailyRent:r)+(t.isValletApplicable&&e.isValletApplicable?e.valletCharges:0),{totalRent:a=Math.ceil(a/e.roundingUpTo)*e.roundingUpTo,perHrRent:e.rentPerHr,valletCharges:t.isValletApplicable&&e.isValletApplicable?e.valletCharges:0,totalTimeHr:n}}return{totalRent:e.maxDailyRent}}(t,e)),console.log(c)},children:"Calculate Rent"}),c?(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{children:["Total Rent: ",c.totalRent]}),(0,j.jsxs)("p",{children:["Per Hour Rent: ",c.perHrRent]}),(0,j.jsxs)("p",{children:["Valet Charges: ",c.valletCharges]}),(0,j.jsxs)("p",{children:["Total Time (in hours): ",c.totalTimeHr]})]}):null]})}},2982:function(e,t){t.Z="/server/parking-management-service/"}}]);
//# sourceMappingURL=498.07c11a13.chunk.js.map