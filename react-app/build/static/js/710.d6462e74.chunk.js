"use strict";(self.webpackChunkParkingClip=self.webpackChunkParkingClip||[]).push([[710],{26710:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i=n(74165),s=n(15861),a=n(29439),r=n(72791),o=(n(77063),n(2982)),l=n(31243),c=n(19658),d=n(30097),u=n.n(d),p=n(80184),h=function(){var e=(0,r.useState)(!0),t=(0,a.Z)(e,2),n=(t[0],t[1],o.Z+"api/parkings/vehicle/ticketByvehicle/"),d=(0,r.useState)(""),h=(0,a.Z)(d,2),v=h[0],g=h[1],m=(0,r.useState)(!0),x=(0,a.Z)(m,2),f=(x[0],x[1],(0,r.useState)(!1)),j=(0,a.Z)(f,2),y=(j[0],j[1]),C=(0,r.useState)(""),Z=(0,a.Z)(C,2),k=Z[0];Z[1];(0,r.useEffect)((function(){""!==k&&y(!0)}),[k]);var S=(0,r.useState)(null),w=(0,a.Z)(S,2),b=w[0],A=w[1],N=(0,r.useState)(null),M=(0,a.Z)(N,2),B=M[0],I=M[1],P=(0,r.useRef)(null),z=(0,r.useRef)(null),T=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0});case 2:t=e.sent,A(t),P.current.srcObject=t,P.current.play();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("exiting",t),s=L(t),(a=new FormData).append("file",s),fetch("https://anpr-api.pushpak.cloud/api/v1/plate_number",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){var t,i=e.plate_number;""===i?(T(),I(null),console.log("No LPN Detected")):(console.log(i),I(null),t=i,console.log("got",t),l.Z.get(n+t).then((function(e){console.log(e),V(e.data.data)})).catch((function(e){400===e.response.status&&alert("Vehicle not found, Invalid Vehicle number. Try Again")})))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){for(var t=e.split(",")[1],n=e.split(";")[0].split("/")[1],i=atob(t),s=new ArrayBuffer(i.length),a=new Uint8Array(s),r=0;r<i.length;r++)a[r]=i.charCodeAt(r);var o=new Blob([a],{type:"image/".concat(n)}),l="image_".concat(Date.now(),".").concat(n);return new File([o],l,{type:"image/".concat(n)})}var E=(0,r.useState)(null),D=(0,a.Z)(E,2),H=D[0],V=D[1],W=(0,r.useState)(!1),O=(0,a.Z)(W,2),F=O[0];O[1];return(0,p.jsxs)("div",{style:{width:"100%"},children:[null===b?(0,p.jsx)("div",{children:H?(0,p.jsx)("div",{className:"container",children:(0,p.jsxs)("div",{className:"ticket",children:[""!==v&&(0,p.jsx)(c.Z,{severity:"success",children:v.data.message}),(0,p.jsx)("div",{className:"wrapper",children:(0,p.jsx)("span",{style:{fontSize:30,linHeight:39,marginBottom:30},children:"Ticket"})}),(0,p.jsxs)("div",{style:{marginBottom:18},children:[(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,p.jsx)("span",{style:{fontSize:20},children:H.businessName}),(0,p.jsx)("span",{children:"Ticket No. "})]}),(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,p.jsx)("div",{children:(0,p.jsx)("span",{children:H.parkingLocation})}),(0,p.jsx)("span",{style:{color:"#21BECC",fontWeight:"700"},children:H.ticketId})]})]}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,p.jsx)("div",{className:"center",style:{marginBottom:16},children:(0,p.jsx)("img",{src:H.qrCode,alt:"logo",width:200,height:200})})}),(0,p.jsxs)("div",{style:{marginBottom:16},children:[(0,p.jsx)("span",{className:"entryText",children:"Entry Details"}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,p.jsxs)("span",{children:[H.vehicleType," - ",H.vehicleRegistrationNo]})}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,p.jsxs)("span",{children:["Contact No - ",H.mobileNo]})})]}),(0,p.jsx)("span",{className:"entryText",style:{marginBottom:16},children:"Total Rent"}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,p.jsx)("div",{className:"borderContainer",style:{marginBottom:16},children:(0,p.jsxs)("span",{style:{fontSize:30},children:[" \u20b9  ",H.ticketPaymentDetails.parkingCharges.totalRent]})})}),(0,p.jsx)("span",{children:"Rent breakup"}),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"borderContainer",style:{height:135,marginTop:10,marginBottom:20,alignItems:"center",justifyContent:"center"},children:[(0,p.jsxs)("div",{className:"details",children:[(0,p.jsx)("span",{children:" Rent per Hour"}),(0,p.jsxs)("span",{children:[" ",H.ticketPaymentDetails.parkingCharges.perHrRent," "]})]}),(0,p.jsxs)("div",{className:"details",children:[(0,p.jsx)("span",{children:" Vallet Charges "}),(0,p.jsxs)("span",{children:[H.ticketPaymentDetails.parkingCharges.valletCharges," "]})]}),(0,p.jsxs)("div",{className:"details",style:{border:"none"},children:[(0,p.jsx)("span",{children:" Total Time Hr "}),(0,p.jsxs)("span",{children:[H.ticketPaymentDetails.parkingCharges.totalTimeHr," "]})]})]})}),"EXITED"!=H.parkingStatus?(0,p.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:10},children:(0,p.jsx)("button",{onClick:function(){console.log("exiting");var e=o.Z+"api/parkings/vehicle/ticketStatus/";l.Z.put(e+H.ticketId+"/EXITED").then((function(e){console.log(e),g(e)}))},children:"Exit Vehicle"})}):(0,p.jsxs)("span",{children:["Parking Status: ",H.parkingStatus]}),(0,p.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:16}}),(0,p.jsx)("button",{onClick:function(){window.location.reload(!1)},children:"Scan Another"})]})}):(0,p.jsx)("div",{style:{alignItems:"center",justifyContent:"center",width:"100%",display:"flex",height:"100vh"},children:(0,p.jsx)("button",{style:{width:"47%",marginLeft:"3%"},onClick:T,children:"Scan Number Plate"})})}):(0,p.jsxs)("div",{children:[(0,p.jsx)(u(),{audio:!1,ref:z,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"environment",width:"80%",torch:F},className:"webcam"}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:function(){var e=z.current.getScreenshot();console.log("img",e),A(null),R(e)},children:"Take picture"})})]}),null!==B&&(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{src:B,alt:"captured"}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:R,children:"Scan the image"})})]})]})}},2982:function(e,t){t.Z="/server/parking-management-service/"},19658:function(e,t,n){n.d(t,{Z:function(){return P}});var i=n(4942),s=n(63366),a=n(87462),r=n(72791),o=n(28182),l=n(94419),c=n(12065),d=n(66934),u=n(31402),p=n(14036),h=n(35527),v=n(75878),g=n(21217);function m(e){return(0,g.Z)("MuiAlert",e)}var x=(0,v.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),f=n(13400),j=n(76189),y=n(80184),C=(0,j.Z)((0,y.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Z=(0,j.Z)((0,y.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),k=(0,j.Z)((0,y.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),S=(0,j.Z)((0,y.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),w=(0,j.Z)((0,y.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),b=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],A=(0,d.ZP)(h.Z,{name:"MuiAlert",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,p.Z)(n.color||n.severity))]]}})((function(e){var t=e.theme,n=e.ownerState,s="light"===t.palette.mode?c._j:c.$n,r="light"===t.palette.mode?c.$n:c._j,o=n.color||n.severity;return(0,a.Z)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},o&&"standard"===n.variant&&(0,i.Z)({color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:s(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:r(t.palette[o].light,.9)},"& .".concat(x.icon),t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}),o&&"outlined"===n.variant&&(0,i.Z)({color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:s(t.palette[o].light,.6),border:"1px solid ".concat((t.vars||t).palette[o].light)},"& .".concat(x.icon),t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}),o&&"filled"===n.variant&&(0,a.Z)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(o,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(o,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[o].dark:t.palette[o].main,color:t.palette.getContrastText(t.palette[o].main)}))})),N=(0,d.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:function(e,t){return t.icon}})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),M=(0,d.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:function(e,t){return t.message}})({padding:"8px 0",minWidth:0,overflow:"auto"}),B=(0,d.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:function(e,t){return t.action}})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),I={success:(0,y.jsx)(C,{fontSize:"inherit"}),warning:(0,y.jsx)(Z,{fontSize:"inherit"}),error:(0,y.jsx)(k,{fontSize:"inherit"}),info:(0,y.jsx)(S,{fontSize:"inherit"})},P=r.forwardRef((function(e,t){var n,i,r,c,d,h,v=(0,u.Z)({props:e,name:"MuiAlert"}),g=v.action,x=v.children,j=v.className,C=v.closeText,Z=void 0===C?"Close":C,k=v.color,S=v.components,P=void 0===S?{}:S,z=v.componentsProps,T=void 0===z?{}:z,R=v.icon,L=v.iconMapping,E=void 0===L?I:L,D=v.onClose,H=v.role,V=void 0===H?"alert":H,W=v.severity,O=void 0===W?"success":W,F=v.slotProps,_=void 0===F?{}:F,U=v.slots,X=void 0===U?{}:U,$=v.variant,q=void 0===$?"standard":$,G=(0,s.Z)(v,b),J=(0,a.Z)({},v,{color:k,severity:O,variant:q}),K=function(e){var t=e.variant,n=e.color,i=e.severity,s=e.classes,a={root:["root","".concat(t).concat((0,p.Z)(n||i)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,l.Z)(a,m,s)}(J),Q=null!=(n=null!=(i=X.closeButton)?i:P.CloseButton)?n:f.Z,Y=null!=(r=null!=(c=X.closeIcon)?c:P.CloseIcon)?r:w,ee=null!=(d=_.closeButton)?d:T.closeButton,te=null!=(h=_.closeIcon)?h:T.closeIcon;return(0,y.jsxs)(A,(0,a.Z)({role:V,elevation:0,ownerState:J,className:(0,o.Z)(K.root,j),ref:t},G,{children:[!1!==R?(0,y.jsx)(N,{ownerState:J,className:K.icon,children:R||E[O]||I[O]}):null,(0,y.jsx)(M,{ownerState:J,className:K.message,children:x}),null!=g?(0,y.jsx)(B,{ownerState:J,className:K.action,children:g}):null,null==g&&D?(0,y.jsx)(B,{ownerState:J,className:K.action,children:(0,y.jsx)(Q,(0,a.Z)({size:"small","aria-label":Z,title:Z,color:"inherit",onClick:D},ee,{children:(0,y.jsx)(Y,(0,a.Z)({fontSize:"small"},te))}))}):null]}))}))}}]);
//# sourceMappingURL=710.d6462e74.chunk.js.map