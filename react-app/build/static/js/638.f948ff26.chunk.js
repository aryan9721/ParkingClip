"use strict";(self.webpackChunkParkingClip=self.webpackChunkParkingClip||[]).push([[638],{32638:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var i=t(29439),a=t(72791),o=t(61399),s=(t(66772),t(82957),t(71323),t(2982)),l=t(31243),c=t(20890),r=t(80184),d=function(){var e=(0,a.useState)([]),n=(0,i.Z)(e,2),t=n[0],d=n[1],u=(0,a.useState)("no location found"),f=(0,i.Z)(u,2),h=f[0],m=f[1],g=(0,a.useState)([]),p=(0,i.Z)(g,2),v=p[0],b=p[1],N=(0,a.useState)("no business found"),C=(0,i.Z)(N,2),j=C[0],x=C[1];(0,a.useEffect)((function(){y()}),[]);var y=function(){l.Z.get(s.Z+"api/businesses").then((function(e){console.log(e.data.data.data),b(e.data.data.data),x(e.data.data.data[0]),d(e.data.data.data[0].locations),m(e.data.data.data[0].locations[0])}))},Z=(s.Z,j.businessId,h.name,(0,a.useState)([])),w=(0,i.Z)(Z,2),S=w[0],R=w[1];(0,a.useEffect)((function(){k()}),[h]);var k=function(){l.Z.get(s.Z+"api/commons/vehicles/"+j.businessId+"?location="+h.name).then((function(e){console.log(e),R(e.data.data.data)}))},q={columns:[{label:"QR Code",field:"qrCode"},{label:"Mobile No",field:"mobileNo"},{label:"Vehicle Number",field:"vehicleRegistrationNo",width:150},{label:"Vehicle Type",field:"vehicleType",width:270},{label:"Print",field:"actions",width:50,sort:!1}],rows:S&&S.map((function(e){return{qrCode:(0,r.jsx)("img",{src:e.qrCode,alt:""}),mobileNo:e.mobileNo,vehicleRegistrationNo:e.vehicleRegistrationNo,vehicleType:e.vehicleType,actions:(0,r.jsx)("button",{onClick:function(){return function(e){console.log("printing",e);var n=window.open(),t=new Image;t.onload=function(){n.document.write('<img src="'.concat(e.qrCode,'" />')),n.print(),n.close()},t.src=e.qrCode}(e)},children:"Print"})}}))};return(0,r.jsx)("div",{className:"home",children:(0,r.jsx)("div",{className:"homeContainer",children:(0,r.jsxs)("div",{className:"VRbody",children:[(0,r.jsxs)("div",{className:"formInput",style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(c.Z,{variant:"h5",children:"QR Record for Business: "}),(0,r.jsx)("select",{style:{marginLeft:10,marginRight:10},id:"businessselect",onChange:function(e){var n=JSON.parse(e.target.value);x(n),console.log(n),d(n.locations),n.location[0]?m(n.locations[0]):m("no location found")},children:v.map((function(e){return(0,r.jsx)("option",{value:JSON.stringify(e),children:e.businessName})}))}),(0,r.jsx)(c.Z,{variant:"h5",children:" At Location: "}),(0,r.jsx)("select",{style:{marginLeft:10},id:"locationSelect",onChange:function(e){var n=JSON.parse(e.target.value);m(n)},children:t.map((function(e){return(0,r.jsx)("option",{value:JSON.stringify(e),children:e.name})}))})]}),(0,r.jsx)("h3",{children:"Registered Vehicles"}),(0,r.jsx)(o.g0K,{noBottomColumns:!0,style:{lineHeight:"normal",whiteSpace:"pre",justifyContent:"center"},striped:!0,bordered:!0,small:!0,data:q})]})})})}},2982:function(e,n){n.Z="/server/parking-management-service/"}}]);
//# sourceMappingURL=638.f948ff26.chunk.js.map